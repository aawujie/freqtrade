# Freqtrade Hyperoptç»“æœè§£è¯»æŒ‡å— - å‚æ•°ä¼˜åŒ–å®Œå…¨æ•™ç¨‹

## ğŸ“‹ ç›®å½•

- ä»€ä¹ˆæ˜¯Hyperopt
- Hyperoptç»“æœæ€»è§ˆ
- æ ¸å¿ƒæŒ‡æ ‡è¯¦è§£
- ä¼˜åŒ–è¿‡ç¨‹åˆ†æ
- å‚æ•°ç»„åˆè¯„ä¼°
- æœ€ä½³å‚æ•°é€‰æ‹©
- å®æˆ˜æ¡ˆä¾‹åˆ†æ
- å¸¸è§è¯¯åŒºå’Œé™·é˜±
- å¦‚ä½•æ”¹è¿›ä¼˜åŒ–
- Hyperoptç»“æœæ£€æŸ¥æ¸…å•

## ğŸ¯ ä»€ä¹ˆæ˜¯Hyperopt

### Hyperoptçš„å®šä¹‰

Hyperoptï¼ˆè¶…å‚æ•°ä¼˜åŒ–ï¼‰å°±æ˜¯ç”¨**ç®—æ³•**æ¥è‡ªåŠ¨å¯»æ‰¾ç­–ç•¥çš„æœ€ä½³å‚æ•°ç»„åˆï¼Œè®©ç­–ç•¥è¡¨ç°è¾¾åˆ°æœ€ä¼˜ã€‚

### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Hyperoptï¼Ÿ

- ğŸ” **è‡ªåŠ¨ä¼˜åŒ–**: æ— éœ€æ‰‹åŠ¨å°è¯•å„ç§å‚æ•°ç»„åˆ
- ğŸ¯ **ç§‘å­¦ä¼˜åŒ–**: ä½¿ç”¨æ•°å­¦ç®—æ³•å¯»æ‰¾æœ€ä¼˜è§£
- ğŸ’° **æå‡æ”¶ç›Š**: æ‰¾åˆ°æ›´å¥½çš„å‚æ•°ç»„åˆ
- âš¡ **èŠ‚çœæ—¶é—´**: è‡ªåŠ¨åŒ–å®Œæˆå‚æ•°è°ƒä¼˜å·¥ä½œ

### Hyperopt vs æ‰‹åŠ¨è°ƒå‚

| å¯¹æ¯”é¡¹           | æ‰‹åŠ¨è°ƒå‚ | Hyperoptä¼˜åŒ– |
| ---------------- | -------- | ------------ |
| **æ•ˆç‡**   | è€—æ—¶è´¹åŠ› | è‡ªåŠ¨åŒ–å®Œæˆ   |
| **ç§‘å­¦æ€§** | ä¸»è§‚åˆ¤æ–­ | æ•°å­¦ç®—æ³•     |
| **å…¨é¢æ€§** | å®¹æ˜“é—æ¼ | ç³»ç»Ÿæ€§æœç´¢   |
| **ç»“æœ**   | å¯èƒ½æ¬¡ä¼˜ | å…¨å±€æœ€ä¼˜     |

âš ï¸ **é‡è¦æé†’**: Hyperoptç»“æœä¼˜ç§€ä¸ç­‰äºå®ç›˜ä¸€å®šèµšé’±ï¼Œè¿‡æ‹Ÿåˆé£é™©éœ€è¦æ³¨æ„ï¼

## ğŸ”¬ HyperoptåŸç†è¯¦è§£

### 1. ä¼˜åŒ–é—®é¢˜çš„æœ¬è´¨

Hyperoptçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†äº¤æ˜“ç­–ç•¥çš„å‚æ•°è°ƒä¼˜è½¬åŒ–ä¸º**æ•°å­¦ä¼˜åŒ–é—®é¢˜**ï¼š

```python
# ä¼ ç»Ÿçš„æ‰‹åŠ¨è°ƒå‚
for buy_rsi in [20, 25, 30, 35, 40]:
    for sell_rsi in [70, 75, 80]:
        for stoploss in [-0.05, -0.10, -0.15]:
            result = backtest(strategy_with_params)
            if result.profit > best_profit:
                best_profit = result.profit
                best_params = (buy_rsi, sell_rsi, stoploss)

# Hyperoptçš„è‡ªåŠ¨ä¼˜åŒ–
best_params = hyperopt.minimize(
    objective_function,  # è¦æœ€å°åŒ–çš„ç›®æ ‡å‡½æ•°
    parameter_space,     # å‚æ•°æœç´¢ç©ºé—´
    algorithm=tpe.suggest, # ä¼˜åŒ–ç®—æ³•
    max_evals=100        # æœ€å¤§è¯„ä¼°æ¬¡æ•°
)
```

### 2. ç›®æ ‡å‡½æ•° (Objective Function)

Hyperopté€šè¿‡**ç›®æ ‡å‡½æ•°**æ¥é‡åŒ–ç­–ç•¥çš„å¥½åï¼š

```python
def objective_function(params):
    """
    Hyperoptçš„ç›®æ ‡å‡½æ•°
    ç›®æ ‡ï¼šæ‰¾åˆ°ä½¿è¿™ä¸ªå‡½æ•°è¿”å›å€¼æœ€å°çš„å‚æ•°ç»„åˆ
    """
    # 1. ä½¿ç”¨å‚æ•°è¿è¡Œå›æµ‹
    result = backtest(strategy, params)

    # 2. è®¡ç®—å¤šä¸ªæŒ‡æ ‡
    total_profit = result.total_profit
    max_drawdown = result.max_drawdown
    win_rate = result.win_rate
    total_trades = result.total_trades

    # 3. ç»¼åˆè¯„åˆ†ï¼ˆFreqtradeé»˜è®¤ç®—æ³•ï¼‰
    if total_trades < 10:
        return 1000  # äº¤æ˜“å¤ªå°‘ï¼Œç»™äºˆé«˜æƒ©ç½š

    profit_score = -total_profit  # åˆ©æ¶¦è¶Šé«˜ï¼Œç›®æ ‡å‡½æ•°è¶Šå°
    risk_score = max_drawdown * 2  # å›æ’¤æƒ©ç½š
    trade_penalty = abs(total_trades - 200) * 0.001  # åç¦»ç†æƒ³äº¤æ˜“æ•°çš„æƒ©ç½š

    return profit_score + risk_score + trade_penalty
```

### 3. å‚æ•°ç©ºé—´å®šä¹‰

**å‚æ•°ç©ºé—´**å®šä¹‰äº†æ¯ä¸ªå‚æ•°çš„å–å€¼èŒƒå›´å’Œç±»å‹ï¼š

```python
# åœ¨ç­–ç•¥æ–‡ä»¶ä¸­å®šä¹‰
class MyStrategy(IStrategy):
    # æ•´æ•°å‚æ•°ï¼šRSIé˜ˆå€¼
    buy_rsi = IntParameter(low=20, high=40, default=30)

    # å®æ•°å‚æ•°ï¼šæ­¢æŸæ¯”ä¾‹
    stoploss = DecimalParameter(low=-0.3, high=-0.05, default=-0.1)

    # åˆ†ç±»å‚æ•°ï¼šæ—¶é—´å‘¨æœŸ
    timeframe = CategoricalParameter(["5m", "15m", "1h"], default="5m")

    # å®æ•°å‚æ•°ï¼šROIé˜¶æ¢¯
    minimal_roi = {
        "0": DecimalParameter(low=0.05, high=0.15, default=0.1),
        "30": DecimalParameter(low=0.02, high=0.08, default=0.05),
        "60": DecimalParameter(low=0.01, high=0.05, default=0.02),
        "0": 0
    }
```

### 4. ä¼˜åŒ–ç®—æ³•è¯¦è§£

#### TPE (Tree-structured Parzen Estimator) - é»˜è®¤ç®—æ³•

TPEç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼š**ç”¨å†å²çš„å¥½ç»“æœæ¥æŒ‡å¯¼æœªæ¥çš„æœç´¢**

```python
# TPEçš„å·¥ä½œåŸç†
def tpe_suggest(parameter_space, previous_results):
    """
    TPEç®—æ³•çš„æ ¸å¿ƒé€»è¾‘
    """
    # 1. å°†å†å²ç»“æœåˆ†ä¸ºå¥½å’Œåä¸¤ç»„
    good_results = [r for r in previous_results if r.objective < threshold]
    bad_results = [r for r in previous_results if r.objective >= threshold]

    # 2. ä¸ºæ¯ä¸ªå‚æ•°å»ºç«‹æ¦‚ç‡åˆ†å¸ƒ
    for param in parameter_space:
        # åŸºäºå¥½ç»“æœçš„å‚æ•°åˆ†å¸ƒ
        good_distribution = fit_distribution(good_results[param])

        # åŸºäºåç»“æœçš„å‚æ•°åˆ†å¸ƒ
        bad_distribution = fit_distribution(bad_results[param])

        # 3. è®¡ç®—å‚æ•°å€¼çš„æœŸæœ›æ”¹è¿› (EI)
        expected_improvement = calculate_ei(good_dist, bad_dist)

    # 4. é€‰æ‹©æœŸæœ›æ”¹è¿›æœ€å¤§çš„å‚æ•°ç»„åˆ
    return best_candidate
```

#### å…¶ä»–å¯ç”¨ç®—æ³•

```python
# éšæœºæœç´¢ - ç®€å•ä½†æœ‰æ•ˆ
algorithm = hyperopt.rand.suggest

# æ¨¡æ‹Ÿé€€ç« - é€‚åˆè¿ç»­å‚æ•°
algorithm = hyperopt.anneal.suggest

# è‡ªé€‚åº”TPE - æ ¹æ®é—®é¢˜è‡ªåŠ¨è°ƒæ•´
algorithm = hyperopt.atpe.suggest
```

### 5. é‡‡æ ·ç­–ç•¥è¯¦è§£

#### éšæœºé‡‡æ ·
```python
# ä¼˜ç‚¹ï¼šç®€å•ã€å‡åŒ€è¦†ç›–
# ç¼ºç‚¹ï¼šæ•ˆç‡ä½ï¼Œä¸åˆ©ç”¨å†å²ä¿¡æ¯
random_sample = {
    'buy_rsi': random.randint(20, 40),
    'sell_rsi': random.randint(60, 80),
    'stoploss': random.uniform(-0.3, -0.05)
}
```

#### ç½‘æ ¼é‡‡æ ·
```python
# ä¼˜ç‚¹ï¼šç³»ç»Ÿæ€§ã€ç¡®å®šæ€§
# ç¼ºç‚¹ï¼šç»´åº¦ç¾éš¾ï¼Œå‚æ•°ç©ºé—´å·¨å¤§æ—¶æ•ˆç‡æä½
grid_sample = {
    'buy_rsi': [20, 25, 30, 35, 40],
    'sell_rsi': [60, 65, 70, 75, 80],
    'stoploss': [-0.05, -0.10, -0.15, -0.20, -0.25]
}
# æ€»ç»„åˆæ•° = 5 Ã— 5 Ã— 5 = 125
```

#### TPEæ™ºèƒ½é‡‡æ ·
```python
# ä¼˜ç‚¹ï¼šå­¦ä¹ å†å²ï¼Œèšç„¦ä¼˜è´¨åŒºåŸŸ
# ç­–ç•¥ï¼šä¼˜å…ˆæ¢ç´¢"å¥½ç»“æœ"çš„å‚æ•°åŒºåŸŸï¼Œå¶å°”å°è¯•"æ–°åŒºåŸŸ"
tpe_sample = adaptive_sampling_based_on_history()
```

### 6. æ”¶æ•›æœºåˆ¶

Hyperoptçš„æ”¶æ•›è¿‡ç¨‹é€šå¸¸éµå¾ªä»¥ä¸‹æ¨¡å¼ï¼š

```python
# ä¼˜åŒ–è¿‡ç¨‹çš„å¯è§†åŒ–
def convergence_pattern():
    """
    å…¸å‹Hyperoptæ”¶æ•›æ›²çº¿
    """
    epochs = [1, 2, 3, 4, 5, 10, 20, 50, 100]
    objectives = [
        -1.2,  # éšæœºæ¢ç´¢
        -1.5,  # å¼€å§‹æ‰¾åˆ°è¾ƒå¥½ç»“æœ
        -2.1,  # å¿«é€Ÿæ”¹è¿›
        -2.8,  # è¿›å…¥ä¼˜è´¨åŒºåŸŸ
        -3.2,  # ç²¾ç»†è°ƒæ•´
        -4.1,  # ç¨³å®šæ”¶æ•›
        -4.8,  # ç»§ç»­ä¼˜åŒ–
        -5.2,  # æ¥è¿‘æœ€ä¼˜
        -5.5   # æœ€ç»ˆç»“æœ
    ]
    return epochs, objectives
```

#### æ”¶æ•›åˆ¤æ–­æ ‡å‡†

```python
def check_convergence(results, window=10):
    """
    æ£€æŸ¥æ˜¯å¦æ”¶æ•›çš„ç®€å•æ–¹æ³•
    """
    recent_results = results[-window:]

    # 1. ç›®æ ‡å‡½æ•°å˜åŒ–å¾ˆå°
    objective_std = np.std([r.objective for r in recent_results])
    if objective_std < 0.01:
        return "å·²æ”¶æ•›"

    # 2. æœ€ä½³ç»“æœé•¿æ—¶é—´æ²¡æœ‰æ”¹å–„
    best_recent = min([r.objective for r in recent_results])
    best_overall = min([r.objective for r in results])
    if abs(best_recent - best_overall) < 0.05:
        return "å¯èƒ½å·²æ”¶æ•›"

    return "ä»åœ¨ä¼˜åŒ–"
```

### 7. å¹¶è¡Œä¼˜åŒ–æœºåˆ¶

Freqtradeæ”¯æŒå¤šè¿›ç¨‹å¹¶è¡Œä¼˜åŒ–ï¼š

```bash
# ä½¿ç”¨4ä¸ªå¹¶è¡Œè¿›ç¨‹
freqtrade hyperopt --epochs 100 --jobs 4
```

```python
# å¹¶è¡Œä¼˜åŒ–åŸç†
def parallel_hyperopt():
    """
    å¹¶è¡ŒHyperoptçš„å·¥ä½œæµç¨‹
    """
    # 1. ä¸»è¿›ç¨‹ï¼šç®¡ç†ä¼˜åŒ–çŠ¶æ€
    master_process = HyperoptManager()

    # 2. å·¥ä½œè¿›ç¨‹ï¼šç‹¬ç«‹è¿è¡Œå›æµ‹
    worker_processes = [BacktestWorker() for _ in range(4)]

    # 3. å‚æ•°åˆ†å‘ï¼šæ¯ä¸ªè¿›ç¨‹è·å¾—ä¸åŒçš„å‚æ•°ç»„åˆ
    for worker in worker_processes:
        params = master_process.get_next_params()
        worker.evaluate_params(params)

    # 4. ç»“æœæ”¶é›†ï¼šæ±‡æ€»æ‰€æœ‰è¿›ç¨‹çš„ç»“æœ
    all_results = collect_results_from_workers()

    return best_params_from_all_results
```

### 8. è¶…å‚æ•°è°ƒä¼˜çš„è¶…å‚æ•°

```python
# Hyperoptè‡ªèº«çš„å‚æ•°è°ƒä¼˜
hyperopt_config = {
    # ä¼˜åŒ–ç®—æ³•é€‰æ‹©
    'algo': tpe.suggest,

    # æœ€å¤§è¯„ä¼°æ¬¡æ•°
    'max_evals': 200,

    # æ—©æœŸåœæ­¢
    'early_stop_fn': no_progress_loss(20),

    # å¹¶è¡Œåº¦
    'jobs': 4,

    # éšæœºç§å­ï¼ˆä¿è¯ç»“æœå¯é‡ç°ï¼‰
    'rseed': 42,

    # å‚æ•°ç©ºé—´
    'space': strategy_parameter_space
}
```

## ğŸ“Š Hyperoptç»“æœæ€»è§ˆ

å½“ä½ è¿è¡ŒHyperoptåï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¡¨æ ¼ï¼š

| Best   | Epoch  | Trades | Win | Draw | Loss | Win% | Avg profit | Profit                 | Avg duration | Objective | Max Drawdown (Acct)     |
| ------ | ------ | ------ | --- | ---- | ---- | ---- | ---------- | ---------------------- | ------------ | --------- | ----------------------- |
| * Best | 1/100  | 246    | 114 | 40   | 92   | 46.3 | 0.09%      | 16.536 USDT    (1.65%) | 16:01:00     | -1.73882  | 25.683 USDT    (2.46%)  |
| * Best | 6/100  | 38     | 17  | 8    | 13   | 44.7 | 0.17%      | 5.951 USDT     (0.60%) | 23:20:00     | -2.04974  | 1.849 USDT      (0.18%) |
| * Best | 7/100  | 28     | 12  | 6    | 10   | 42.9 | 0.25%      | 6.493 USDT     (0.65%) | 20:01:00     | -2.14340  | 0.092 USDT      (0.01%) |
| * Best | 13/100 | 255    | 135 | 55   | 65   | 52.9 | 0.12%      | 23.813 USDT    (2.38%) | 17:02:00     | -2.85498  | 27.165 USDT    (2.58%)  |
| * Best | 16/100 | 260    | 114 | 75   | 71   | 43.8 | 0.14%      | 32.569 USDT    (3.26%) | 14:15:00     | -6.16241  | 15.598 USDT    (1.49%)  |

## ğŸ¯ æ ¸å¿ƒæŒ‡æ ‡è¯¦è§£

### åŸºç¡€æŒ‡æ ‡

#### 1. Best (æœ€ä½³æ ‡è®°)

- **å«ä¹‰**: æ ‡è®°è¯¥è½®æ¬¡æ˜¯å¦ä¸ºå½“å‰æœ€ä½³ç»“æœ
- **æ ‡è¯†**: `* Best` è¡¨ç¤ºè¿™ä¸€è½®çš„å‚æ•°ç»„åˆè¡¨ç°æœ€å¥½
- **ä½œç”¨**: å¸®åŠ©å¿«é€Ÿè¯†åˆ«æœ€ä¼˜å‚æ•°ç»„åˆ

#### 2. Epoch (è½®æ¬¡)

- **å«ä¹‰**: å½“å‰æ˜¯ç¬¬å‡ è½®ä¼˜åŒ– (1/100 è¡¨ç¤ºç¬¬1è½®ï¼Œå…±100è½®)
- **ä½œç”¨**: æ˜¾ç¤ºä¼˜åŒ–è¿›åº¦å’Œå½“å‰çŠ¶æ€
- **æ³¨æ„**: è½®æ¬¡è¶Šå¤šï¼Œç»“æœé€šå¸¸è¶Šç¨³å®š

#### 3. Trades (äº¤æ˜“æ¬¡æ•°)

- **å«ä¹‰**: è¯¥å‚æ•°ç»„åˆäº§ç”Ÿçš„äº¤æ˜“æ•°é‡
- **è¯„ä¼°æ ‡å‡†**:
  - âœ… **é€‚ä¸­**: 100-500ç¬” (æ—¢ä¸è¿‡å°‘ä¹Ÿä¸è¿‡å¤š)
  - âš ï¸ **è¿‡å°‘**: <50ç¬” (æ ·æœ¬ä¸è¶³ï¼Œç»Ÿè®¡ä¸ç¨³å®š)
  - âš ï¸ **è¿‡å¤š**: >1000ç¬” (å¯èƒ½è¿‡æ‹Ÿåˆæˆ–äº¤æ˜“é¢‘ç‡è¿‡é«˜)

### äº¤æ˜“è¡¨ç°æŒ‡æ ‡

#### 4. Win Draw Loss Win% (èƒœå¹³è´Ÿç»Ÿè®¡)

```
Win  Draw  Loss  Win%
114    40    92  46.3
```

- **Win**: ç›ˆåˆ©äº¤æ˜“æ•°é‡ (114ç¬”)
- **Draw**: å¹³å±€äº¤æ˜“æ•°é‡ (40ç¬”)
- **Loss**: äºæŸäº¤æ˜“æ•°é‡ (92ç¬”)
- **Win%**: èƒœç‡ç™¾åˆ†æ¯” (46.3%)

**èƒœç‡è¯„ä¼°æ ‡å‡†**:

- âœ… **ä¼˜ç§€**: >55%
- âœ… **è‰¯å¥½**: 45-55%
- âš ï¸ **ä¸€èˆ¬**: 40-45%
- âŒ **è¾ƒå·®**: <40%

#### 5. Avg profit (å¹³å‡åˆ©æ¶¦)

- **å«ä¹‰**: æ¯ç¬”äº¤æ˜“çš„å¹³å‡åˆ©æ¶¦ç™¾åˆ†æ¯”
- **ç¤ºä¾‹**: `0.09%` (æ¯ç¬”äº¤æ˜“å¹³å‡ç›ˆåˆ©0.09%)
- **è¯„ä¼°æ ‡å‡†**:
  - âœ… **ä¼˜ç§€**: >0.2%
  - âœ… **è‰¯å¥½**: 0.1-0.2%
  - âš ï¸ **ä¸€èˆ¬**: 0.05-0.1%
  - âŒ **è¾ƒå·®**: <0.05% æˆ–è´Ÿæ•°

#### 6. Profit (æ€»åˆ©æ¶¦)

```
32.569 USDT (3.26%)
```

- **ç»å¯¹åˆ©æ¶¦**: 32.569 USDT
- **ç™¾åˆ†æ¯”åˆ©æ¶¦**: 3.26%
- **è¯„ä¼°æ ‡å‡†**:
  - âœ… **ä¼˜ç§€**: >5%
  - âœ… **è‰¯å¥½**: 2-5%
  - âš ï¸ **ä¸€èˆ¬**: 0.5-2%
  - âŒ **äºæŸ**: <0%

### æ—¶é—´å’Œé£é™©æŒ‡æ ‡

#### 7. Avg duration (å¹³å‡æŒä»“æ—¶é—´)

- **å«ä¹‰**: æ¯æ¬¡äº¤æ˜“çš„å¹³å‡æŒä»“æ—¶é•¿
- **ç¤ºä¾‹**: `16:01:00` (å¹³å‡16å°æ—¶1åˆ†é’Ÿ)
- **è¯„ä¼°æ ‡å‡†**:
  - âœ… **çŸ­æœŸ**: <1å¤© (é€‚åˆæ—¥å†…äº¤æ˜“)
  - âœ… **ä¸­æœŸ**: 1-3å¤© (å¹³è¡¡é£é™©å’Œæ”¶ç›Š)
  - âš ï¸ **é•¿æœŸ**: >3å¤© (é£é™©è¾ƒé«˜)

#### 8. Max Drawdown (æœ€å¤§å›æ’¤)

```
15.598 USDT (1.49%)
```

- **å«ä¹‰**: ç­–ç•¥çš„æœ€å¤§äºæŸå¹…åº¦
- **ç»å¯¹å›æ’¤**: 15.598 USDT
- **ç™¾åˆ†æ¯”å›æ’¤**: 1.49%
- **è¯„ä¼°æ ‡å‡†**:
  - âœ… **ä¼˜ç§€**: <5%
  - âœ… **è‰¯å¥½**: 5-10%
  - âš ï¸ **ä¸€èˆ¬**: 10-15%
  - âŒ **å±é™©**: >20%

#### 9. Objective (ä¼˜åŒ–ç›®æ ‡å€¼) â­

- **å«ä¹‰**: Hyperoptçš„ä¼˜åŒ–ç›®æ ‡å‡½æ•°å€¼
- **ç‰¹ç‚¹**: **è¶Šå°è¶Šå¥½** (æ›´è´Ÿæ•°æ›´å¥½)
- **ä½œç”¨**: å¹³è¡¡åˆ©æ¶¦ã€é£é™©ã€èƒœç‡ç­‰å¤šé‡å› ç´ 
- **è®¡ç®—é€»è¾‘**: ç»¼åˆè€ƒè™‘åˆ©æ¶¦å› å­ã€èƒœç‡ã€äº¤æ˜“é¢‘ç‡ç­‰

## ğŸ”¬ ä¼˜åŒ–è¿‡ç¨‹åˆ†æ

### Objectiveå€¼å˜åŒ–åˆ†æ

**è§‚å¯Ÿè¶‹åŠ¿**:

```python
# ä¼˜ç§€: Objectiveå€¼æŒç»­ä¸‹é™
Epoch 1: -1.73882  â†’  Epoch 16: -6.16241

# è­¦å‘Š: Objectiveå€¼æ³¢åŠ¨ä¸å®š
Epoch 5: -2.1  â†’  Epoch 10: -1.8  â†’  Epoch 15: -2.2
```

**æ”¶æ•›æ€§è¯„ä¼°**:

- âœ… **æ”¶æ•›è‰¯å¥½**: åæœŸObjectiveå€¼ç¨³å®šåœ¨ä½æ°´å¹³
- âš ï¸ **ä»åœ¨æœç´¢**: Objectiveå€¼ä»åœ¨ä¸‹é™
- âŒ **å¯èƒ½è¿‡æ‹Ÿåˆ**: Objectiveå€¼å¼‚å¸¸åä½

### å‚æ•°ç©ºé—´æ¢ç´¢

**è½®æ¬¡åˆ†å¸ƒåˆ†æ**:

- **å‰30%è½®æ¬¡**: å¹¿æ³›æ¢ç´¢å‚æ•°ç©ºé—´
- **ä¸­30%è½®æ¬¡**: èšç„¦æœ‰å‰æ™¯çš„åŒºåŸŸ
- **å40%è½®æ¬¡**: ç²¾ç»†è°ƒæ•´æœ€ä¼˜å‚æ•°

## ğŸ¯ å‚æ•°ç»„åˆè¯„ä¼°

### å¤šç»´åº¦è¯„ä¼°æ¡†æ¶

#### 1. ç›ˆåˆ©èƒ½åŠ›è¯„ä¼°

```python
# è®¡ç®—ç›ˆåˆ©è¯„åˆ† (0-100åˆ†)
profit_score = min(100, total_profit_percentage * 20)

# ç¤ºä¾‹:
# 3.26% åˆ©æ¶¦ = 65.2åˆ†
profit_score = min(100, 3.26 * 20) = 65.2
```

#### 2. é£é™©æ§åˆ¶è¯„ä¼°

```python
# è®¡ç®—é£é™©è¯„åˆ† (0-100åˆ†)
risk_score = max(0, 100 - max_drawdown_percentage * 2)

# ç¤ºä¾‹:
# 1.49% å›æ’¤ = 97.02åˆ†
risk_score = max(0, 100 - 1.49 * 2) = 97.02
```

#### 3. ç¨³å®šæ€§è¯„ä¼°

```python
# è®¡ç®—ç¨³å®šæ€§è¯„åˆ† (0-100åˆ†)
stability_score = win_rate * 0.7 + (1 - trades_volatility) * 0.3

# trades_volatility = äº¤æ˜“æ¬¡æ•°çš„æ ‡å‡†å·® / å¹³å‡äº¤æ˜“æ¬¡æ•°
```

#### 4. ç»¼åˆè¯„åˆ†

```python
# æœ€ç»ˆè¯„åˆ† = (ç›ˆåˆ©è¯„åˆ† + é£é™©è¯„åˆ† + ç¨³å®šæ€§è¯„åˆ†) / 3
final_score = (profit_score + risk_score + stability_score) / 3
```

### æœ€ä½³å‚æ•°é€‰æ‹©ç­–ç•¥

#### ç­–ç•¥1: å¹³è¡¡å‹é€‰æ‹©

```python
# é€‰æ‹©Objectiveæœ€å°çš„å‚æ•°ç»„åˆ
best_params = min(all_results, key=lambda x: x['objective'])
```

#### ç­–ç•¥2: ä¿å®ˆå‹é€‰æ‹©

```python
# é€‰æ‹©å›æ’¤æœ€å°ä¸”åˆ©æ¶¦ç¨³å®šçš„ç»„åˆ
conservative_params = min(
    [r for r in all_results if r['max_drawdown'] < 5],
    key=lambda x: x['objective']
)
```

#### ç­–ç•¥3: æ¿€è¿›å‹é€‰æ‹©

```python
# é€‰æ‹©åˆ©æ¶¦æœ€å¤§ä½†æ§åˆ¶å›æ’¤çš„ç»„åˆ
aggressive_params = max(
    [r for r in all_results if r['max_drawdown'] < 10],
    key=lambda x: x['total_profit']
)
```

## ğŸ“ˆ å®æˆ˜æ¡ˆä¾‹åˆ†æ

### æ¡ˆä¾‹1: ä¼˜ç§€å‚æ•°ç»„åˆ

```
  â”‚ * Best â”‚ 16/100 â”‚    260 â”‚  114    75    71  43.8 â”‚      0.14% â”‚ 32.569 USDT    (3.26%) â”‚     14:15:00 â”‚  -6.16241 â”‚ 15.598 USDT    (1.49%) â”‚
```

**åˆ†æ**:

- âœ… **Objectiveæœ€ä¼˜**: -6.16241 (å…¨å±€æœ€ä½³)
- âœ… **åˆ©æ¶¦ç¨³å®š**: 3.26%æ€»åˆ©æ¶¦
- âœ… **å›æ’¤æ§åˆ¶**: 1.49% (æä½)
- âœ… **äº¤æ˜“é€‚ä¸­**: 260ç¬” (æ ·æœ¬å……è¶³)
- âœ… **èƒœç‡åˆç†**: 43.8% (ä¸è¿‡é«˜ä¹Ÿä¸è¿‡ä½)

**ç»“è®º**: â­ **æœ€ä½³é€‰æ‹©** - å¹³è¡¡æ€§æœ€ä¼˜ç§€çš„å‚æ•°ç»„åˆ

### æ¡ˆä¾‹2: é«˜åˆ©æ¶¦ä½†é«˜é£é™©

```
  â”‚ * Best â”‚ 13/100 â”‚    255 â”‚  135    55    65  52.9 â”‚      0.12% â”‚ 23.813 USDT    (2.38%) â”‚     17:02:00 â”‚  -2.85498 â”‚ 27.165 USDT    (2.58%) â”‚
```

**åˆ†æ**:

- âœ… **åˆ©æ¶¦ä¸é”™**: 2.38%æ€»åˆ©æ¶¦
- âš ï¸ **å›æ’¤è¾ƒå¤§**: 2.58% (ç›¸å¯¹è¾ƒé«˜)
- âœ… **èƒœç‡è‰¯å¥½**: 52.9%
- âš ï¸ **Objectiveä¸€èˆ¬**: -2.85498

**ç»“è®º**: âš ï¸ **è°¨æ…é€‰æ‹©** - éœ€è¦è¯„ä¼°é£é™©æ‰¿å—èƒ½åŠ›

### æ¡ˆä¾‹3: ä½é¢‘é«˜èƒœç‡

```
  â”‚ * Best â”‚  7/100 â”‚     28 â”‚   12     6    10  42.9 â”‚      0.25% â”‚  6.493 USDT    (0.65%) â”‚     20:01:00 â”‚  -2.14340 â”‚  0.092 USDT    (0.01%) â”‚
```

**åˆ†æ**:

- âœ… **å›æ’¤æä½**: 0.01% (å‡ ä¹æ²¡æœ‰å›æ’¤)
- âš ï¸ **äº¤æ˜“è¿‡å°‘**: åªæœ‰28ç¬” (ç»Ÿè®¡æ„ä¹‰ä¸è¶³)
- âœ… **å¹³å‡åˆ©æ¶¦**: 0.25% (ä¸é”™)
- âš ï¸ **Objectiveä¸€èˆ¬**: -2.14340

**ç»“è®º**: âš ï¸ **æ ·æœ¬ä¸è¶³** - éœ€è¦æ›´å¤šäº¤æ˜“æ•°æ®éªŒè¯

## ğŸš¨ å¸¸è§è¯¯åŒºå’Œé™·é˜±

### è¯¯åŒº1: åªçœ‹åˆ©æ¶¦æœ€é«˜

```python
# âŒ é”™è¯¯åšæ³•
best_params = max(all_results, key=lambda x: x['total_profit'])

# å¯èƒ½çš„é—®é¢˜:
# - å¿½ç•¥äº†å·¨å¤§çš„å›æ’¤é£é™©
# - å¯èƒ½æ˜¯è¿‡æ‹Ÿåˆçš„ç»“æœ
# - åœ¨å®ç›˜ä¸­å¯èƒ½è¡¨ç°ä¸ä½³
```

### è¯¯åŒº2: åªçœ‹Objectiveå€¼

```python
# âš ï¸ éœ€è¦ç»“åˆå®é™…æƒ…å†µåˆ†æ
best_params = min(all_results, key=lambda x: x['objective'])

# éœ€è¦æ£€æŸ¥:
# - æ˜¯å¦äº¤æ˜“æ¬¡æ•°è¿‡å°‘
# - æ˜¯å¦åœ¨ç‰¹å®šå¸‚åœºæ¡ä»¶ä¸‹è¿‡æ‹Ÿåˆ
```

### è¯¯åŒº3: å¿½ç•¥äº¤æ˜“é¢‘ç‡

```python
# âš ï¸ äº¤æ˜“è¿‡å°‘æˆ–è¿‡å¤šéƒ½æœ‰é—®é¢˜
if trades < 50:
    print("âš ï¸ æ ·æœ¬ä¸è¶³ï¼Œç»Ÿè®¡ä¸ç¨³å®š")
elif trades > 1000:
    print("âš ï¸ äº¤æ˜“è¿‡é¢‘ï¼Œå¯èƒ½è¿‡æ‹Ÿåˆ")
```

### è¯¯åŒº4: è¿‡åº¦ä¼˜åŒ–

```python
# âŒ é”™è¯¯: è¿½æ±‚æè‡´çš„Objectiveå€¼
# å¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆï¼Œå®ç›˜è¡¨ç°ä¸ä½³

# âœ… æ­£ç¡®: é€‰æ‹©å¹³è¡¡æ€§å¥½çš„å‚æ•°
# åˆ©æ¶¦ã€é£é™©ã€ç¨³å®šæ€§çš„ç»¼åˆè€ƒè™‘
```

## ğŸ”§ å¦‚ä½•æ”¹è¿›ä¼˜åŒ–

### 1. æ‰©å¤§å‚æ•°ç©ºé—´

```python
# åŸå‚æ•°èŒƒå›´å¯èƒ½å¤ªçª„
buy_rsi = IntParameter(low=1, high=50, default=30)

# æ‰©å¤§æœç´¢èŒƒå›´
buy_rsi = IntParameter(low=20, high=80, default=30)
```

### 2. å¢åŠ ä¼˜åŒ–è½®æ¬¡

```bash
# ä»100è½®å¢åŠ åˆ°200è½®
freqtrade hyperopt --epochs 200
```

### 3. ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–ç®—æ³•

```python
# åœ¨ç­–ç•¥ä¸­æŒ‡å®šä¼˜åŒ–å™¨
hyperopt_space = {
    'buy_rsi': HP.uniform('buy_rsi', 20, 80),
    'sell_rsi': HP.uniform('sell_rsi', 60, 90),
}
```

### 4. åˆ†é˜¶æ®µä¼˜åŒ–

```bash
# ç¬¬ä¸€é˜¶æ®µ: ç²—ç•¥æœç´¢
freqtrade hyperopt --epochs 50

# ç¬¬äºŒé˜¶æ®µ: åœ¨æœ€ä½³åŒºåŸŸç²¾ç»†ä¼˜åŒ–
freqtrade hyperopt --epochs 100
```

### 5. æ·»åŠ çº¦æŸæ¡ä»¶

```python
# é¿å…æç«¯å‚æ•°ç»„åˆ
def constraints(params):
    if params['buy_rsi'] >= params['sell_rsi']:
        return False  # ä¹°å…¥RSIä¸èƒ½å¤§äºç­‰äºå–å‡ºRSI
    return True
```

## ğŸ“‹ Hyperoptç»“æœæ£€æŸ¥æ¸…å•

### âœ… åŸºç¡€æ£€æŸ¥

- [ ] **Objectiveå€¼**: æ˜¯å¦æŒç»­æ”¶æ•›åˆ°è¾ƒä½æ°´å¹³
- [ ] **äº¤æ˜“æ¬¡æ•°**: æ˜¯å¦åœ¨åˆç†èŒƒå›´å†… (100-500ç¬”)
- [ ] **èƒœç‡**: æ˜¯å¦åœ¨40-60%ä¹‹é—´
- [ ] **åˆ©æ¶¦**: æ˜¯å¦ä¸ºæ­£æ•°
- [ ] **å›æ’¤**: æ˜¯å¦æ§åˆ¶åœ¨å¯æ¥å—èŒƒå›´å†…

### âœ… ç¨³å®šæ€§æ£€æŸ¥

- [ ] **å‚æ•°é²æ£’æ€§**: ç›¸è¿‘å‚æ•°æ˜¯å¦äº§ç”Ÿç›¸ä¼¼ç»“æœ
- [ ] **æ—¶é—´ç¨³å®šæ€§**: åœ¨ä¸åŒæ—¶é—´æ®µæ˜¯å¦è¡¨ç°ç¨³å®š
- [ ] **å¸‚åœºé€‚åº”æ€§**: åœ¨ä¸åŒå¸‚åœºæ¡ä»¶ä¸‹æ˜¯å¦ç¨³å®š

### âœ… è¿‡æ‹Ÿåˆæ£€æŸ¥

- [ ] **å‚æ•°åˆç†æ€§**: å‚æ•°å€¼æ˜¯å¦åœ¨é¢„æœŸèŒƒå›´å†…
- [ ] **é€»è¾‘åˆç†æ€§**: å‚æ•°ç»„åˆæ˜¯å¦ç¬¦åˆäº¤æ˜“é€»è¾‘
- [ ] **æç«¯å€¼æ£€æŸ¥**: æ˜¯å¦æœ‰ä¸åˆç†çš„å‚æ•°ç»„åˆ

### âœ… å®ç›˜å‡†å¤‡æ£€æŸ¥

- [ ] **æ‰‹ç»­è´¹è€ƒè™‘**: æ˜¯å¦åŒ…å«äº†å®é™…äº¤æ˜“æˆæœ¬
- [ ] **æ»‘ç‚¹è€ƒè™‘**: æ˜¯å¦è€ƒè™‘äº†ä»·æ ¼æ»‘ç‚¹å½±å“
- [ ] **æŒä»“æ—¶é—´**: æ˜¯å¦ç¬¦åˆä½ çš„äº¤æ˜“é£æ ¼
- [ ] **èµ„é‡‘è¦æ±‚**: æ˜¯å¦ç¬¦åˆä½ çš„èµ„é‡‘è§„æ¨¡

## ğŸ¯ æ€»ç»“

### é€‰æ‹©æœ€ä½³å‚æ•°çš„é»„é‡‘æ³•åˆ™

1. **é¦–è¦è€ƒè™‘**: Objectiveå€¼æœ€å°
2. **é£é™©æ§åˆ¶**: æœ€å¤§å›æ’¤ < 10%
3. **æ ·æœ¬å……è¶³**: äº¤æ˜“æ¬¡æ•° > 100ç¬”
4. **èƒœç‡åˆç†**: 40-60%ä¹‹é—´
5. **é€»è¾‘åˆç†**: å‚æ•°ç¬¦åˆäº¤æ˜“ç›´è§‰

### æœ€ç»ˆå»ºè®®

**å¯¹äºä¿å®ˆå‹æŠ•èµ„è€…**:

```python
# é€‰æ‹©ä½å›æ’¤çš„å‚æ•°ç»„åˆ
best_choice = min(
    [r for r in results if r['max_drawdown_pct'] < 5],
    key=lambda x: x['objective']
)
```

**å¯¹äºå¹³è¡¡å‹æŠ•èµ„è€…**:

```python
# é€‰æ‹©ç»¼åˆè¡¨ç°æœ€å¥½çš„
best_choice = min(results, key=lambda x: x['objective'])
```

**å¯¹äºæ¿€è¿›å‹æŠ•èµ„è€…**:

```python
# é€‰æ‹©é«˜åˆ©æ¶¦ä½†é£é™©å¯æ§çš„
best_choice = max(
    [r for r in results if r['max_drawdown_pct'] < 15],
    key=lambda x: x['total_profit']
)
```

---

**ğŸ’¡ è®°ä½**: Hyperoptåªæ˜¯å·¥å…·ï¼Œæœ€ç»ˆçš„ç­–ç•¥è¡¨ç°è¿˜éœ€è¦å®ç›˜éªŒè¯ã€‚è¿‡æ‹Ÿåˆé£é™©å§‹ç»ˆå­˜åœ¨ï¼Œå®šæœŸé‡æ–°ä¼˜åŒ–æ˜¯ä¿æŒç­–ç•¥æœ‰æ•ˆçš„å…³é”®ï¼

**ğŸ‰ æŒæ¡äº†è¿™äº›æŠ€å·§ï¼Œä½ å°±èƒ½æ›´å¥½åœ°è§£è¯»å’Œåº”ç”¨Hyperoptç»“æœï¼Œè®©ç­–ç•¥è¡¨ç°è¾¾åˆ°æœ€ä¼˜ï¼**
